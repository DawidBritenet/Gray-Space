<aura:component description="GS_ProductList" controller="GS_ProductController"
                implements="flexipage:availableForAllPageTypes">
    <aura:attribute name="products" type="Product2"/>
    <aura:attribute name="selectedRows" type="List"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="page" type="Integer" default="1"/>
    <aura:attribute name="pageCount" type="Integer" default="1"/>
    <aura:attribute name="pageSize" type="Integer" default="20"/>
    <aura:attribute name="productsCount" type="Integer"/>
    <aura:attribute name="recordsStart" type="Integer"/>
    <aura:attribute name="recordsEnd" type="Integer"/>
    <aura:attribute name="modalPromise" type="Aura.Action"/>

    <aura:handler event="c:GS_ReInit" action="{! c.doInit }"/>
    <aura:handler name="init" value="{! this }" action="{! c.doInit }"/>

    <lightning:card title="{! $Label.c.GS_Products }">
        <aura:set attribute="actions">
            <lightning:button label="{! $Label.c.GS_New }" onclick="{! c.newProduct }"/>
            <aura:if isTrue="{! v.selectedRows.length > 0 }">
                <lightning:button label="Delete" onclick="{! c.deleteButton }"/>
            </aura:if>
        </aura:set>
        <div class="slds-align_absolute-center">
            <lightning:datatable class="table" keyField="id" data="{! v.products }" columns="{! v.columns }"
                                 onrowaction="{! c.handleRowAction }"
                                 onrowselection="{! c.updateRowSelection }"
                                 showRowNumberColumn="true"/>
        </div>
        <div class="paginationFooter">
            <div class="paginationInfo">
                <lightning:select label="PageSize" aura:id="pageSizePickList" onchange="{! c.setPageSize }"
                                  class="label-hidden">
                    <option value="10">10</option>
                    <option value="20" selected="true">20</option>
                    <option value="30">30</option>
                </lightning:select>
                <p class="paginationInfoText">
                        {! $Label.c.GS_Showing+ ' ' +v.recordsStart + '-' + v.recordsEnd + ' ' + $Label.c.GS_out_of + ' ' + v.productsCount }
                </p>
            </div>

            <lightning:buttonGroup>
                <lightning:buttonIcon iconName="utility:jump_to_left" variant="border" alternativeText="First"
                                      iconClass="dark" disabled="{! v.page == 1 }" onclick="{! c.firstPage }"/>
                <lightning:buttonIcon iconName="utility:left" variant="border" alternativeText="Left" iconClass="dark"
                                      disabled="{! v.page == 1 }" onclick="{! c.previousPage }"/>
                <lightning:buttonIcon iconName="utility:right" variant="border" alternativeText="Right" iconClass="dark"
                                      disabled="{! v.page == v.pageCount }" onclick="{! c.nextPage }"/>
                <lightning:buttonIcon iconName="utility:jump_to_right" variant="border" alternativeText="Last"
                                      iconClass="dark" disabled="{! v.page == v.pageCount }" onclick="{! c.lastPage }"/>
            </lightning:buttonGroup>
        </div>
    </lightning:card>


    <lightning:overlayLibrary aura:id="editProductModal"/>
</aura:component>